<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css">
        <title>Muldoon</title>
    </head>
    <body>
        <div id="titleBar">
            <img src="../HtmlPage/logo1.png" id="logo">
            <h1>Muldoon</h1>
        </div>
        <div id="navBar">
            <a>Home</a>
            <a>Graphs</a>
            <a>MEDA</a>
            <a>Astrojack</a>
        </div>
        <div id="content">
            <div id="graphInput">
                <label for="sol">Sol:</label>
                <input type="number" id="sol" name="sol" min="1" max="1000">
                <br>
                <label for="startTime">Graph Start Time:</label>
                <input type="number" id="startTime" name="startTime" min="0" max="1000" value="0">
                <br>
                <label for="endTime">Graph End Time:</label>
                <input type="number" id="endTime" name="endTime" min="0" max="1000" value="1000">
                <br>
                <label for="showSpeed">View Wind Speed:</label>
                <input type="checkbox" id="showSpeed" name="showSpeed">
                <br>
                <label for="showPressure">View Air Pressure:</label>
                <input type="checkbox" id="showPressure" name="showPressure">
                <br>
                <button>Plot Graph</button>
                <br>
                <p>
                    To generate a graph, first select a sol number to view.
                    Optionally, adjust the graph start and end times to view range subset of the data from the selected sol.
                    Check if the graph should display the wind speed and/or air pressure and finally click the 'Plot Graph' button to generate the graph.
                </p>
                <p>
                    After generating the graph it can be interacted with by (TODO: add interaction instructions after implementation)
                </p>
                <p>
                    The currently viewed graph may also be exported and shared either as an image, or as a url which will link back to the same graph with the same settings.
                    To do so, click the 'Export Image' or 'Export URL' buttons respectively.
                </p>
            </div>
            <div id="graph">
                <h2>MEDA Data Sol #X</h2>
                
                <div>
                    
                  </div>
                             <button id= "click" onclick="getData()">CLick</button>
                  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                  <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-zoom/2.0.0/chartjs-plugin-zoom.min.js" integrity="sha512-B6F98QATBNaDHSE7uANGo5h0mU6fhKCUD+SPAY7KZDxE8QgZw9rewDtNiu3mbbutYDWOKT3SPYD8qDBpG2QnEg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
                  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js" integrity="sha512-SGWgwwRA8xZgEoKiex3UubkSkV1zSE1BS6O4pXcaxcNtUlQsOmOmhVnDwIvqGRfEmuz83tIGL13cXMZn6upPyg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
                  <script src="https://d3js.org/d3.v7.min.js"></script>.
            <canvas id="myChart"></canvas>
                    
                  <script>
                    drawChart();
                    async function drawChart(){
                    const dataPoints = await getData();
                    const ctx = document.getElementById('myChart');
                    new Chart(ctx, {
                      type: 'line',
                      data: {
                        labels: [0,1,2,3,4,5,6,7,8,9], //x axis
                        datasets: [{
                          label: 'change',
                          data: dataPoints, //y axis
                          borderWidth: 1
                        }]
                      },
                      options: {
                        scales: {
                          y: {
                            beginAtZero: true,
                            max: 1000
                          },
                          
                        },
                        plugins: {
                            zoom: {
                                zoom: {
                                    drag: {
                                        enabled: true
                                    }
                                }
                            }
                        }
                      }
                    });
                   Chart.register(zoomPlugin);
                   };
                   
                async function getData(){
                    //works
                    d3.csv('WE__0001___________DER_PS__________________P02.csv').then(function(results){
                        let pressure = [];
                        let sol = [];
                        let newArray = [];
                        for(i= 0; i<10; i++){

                        
                           let bar = results[i].PRESSURE;
                           let time = results[i].LMST;
                           newArray.push("sol: " + time+ ', ' + "pressure: "+ bar);
                           pressure.push(bar);
                           sol.push(time);
                            
                        }
                        console.log(sol);
                        console.log(newArray);
                        
                        
                       return {pressure, sol}
                        })
                          
                }
                  </script>

                  
                <div id="export">
                    <button>Export Image</button>
                    <button>Export URL</button>
                </div>
            </div>
        </div>
        <div id="footerBar">
            (TODO: add footer content)
        </div>
    </body>
</html>